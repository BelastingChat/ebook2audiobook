x-gpu-enabled: &gpu-enabled
  devices:
    - driver: nvidia
      count: all
      capabilities:
        - gpu

x-gpu-disabled: &gpu-disabled
  devices: []

services:
  ebook2audiobookxtts:
    image: athomasson2/ebook2audiobook
    platform: linux/amd64
    tty: true
    stdin_open: true
    ports:
      - 7860:7860
    command: python app.py
    deploy:
      resources:
        reservations:
          <<: *gpu-disabled # change this to gpu-enabled if you have an NVIDIA GPU
          # memory: 4g   # Uncomment to limit RAM reservation to 4GB
          # devices:     # Uncomment to limit GPU VRAM (requires GPU-enabled above)
          #   - driver: nvidia
          #     count: 1
          #     capabilities:
          #       - gpu
        limits:
          # memory: 4g   # Uncomment to limit RAM usage to 4GB
    volumes: []
    # - ./:/home/user/app  # You can activate this line if you want its storage to link to the repo